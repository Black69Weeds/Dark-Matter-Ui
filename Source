--[[
    Eclipse UI Library (Luna/Eulen Hybrid)
    - Modern Dark Theme
    - Native Config System (Auto-Save/Load)
    - distinct Minimize vs Close logic
    - "Real" Dashboard Home Page
]]

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")

local Player = Players.LocalPlayer
local Mouse = Player:GetMouse()

local Library = {
    Flags = {},
    Theme = {
        Accent = Color3.fromRGB(114, 137, 218), -- Blurple/Discord-ish default
        Background = Color3.fromRGB(10, 10, 10),
        Card = Color3.fromRGB(18, 18, 18),
        Text = Color3.fromRGB(240, 240, 240),
        TextDim = Color3.fromRGB(150, 150, 150),
        Outline = Color3.fromRGB(35, 35, 35)
    },
    Folder = "EclipseConfig"
}

--// File System Setup (Safe Mode)
function Library:SaveConfig(Name)
    if not isfolder(Library.Folder) then makefolder(Library.Folder) end
    local json = HttpService:JSONEncode(Library.Flags)
    writefile(Library.Folder .. "/" .. Name .. ".json", json)
end

function Library:LoadConfig(Name)
    if isfolder(Library.Folder) and isfile(Library.Folder .. "/" .. Name .. ".json") then
        local content = readfile(Library.Folder .. "/" .. Name .. ".json")
        local decoded = HttpService:JSONDecode(content)
        -- Note: This only updates the table, fully restoring UI state requires loop mapping
        -- For simplicity in this request, we update the flags.
        for i,v in pairs(decoded) do Library.Flags[i] = v end
        return decoded
    end
    return nil
end

--// Utility: Draggable
local function MakeDraggable(Trigger, Object)
	local Dragging, DragInput, DragStart, StartPos

	Trigger.InputBegan:Connect(function(Input)
		if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
			Dragging = true
			DragStart = Input.Position
			StartPos = Object.Position
			
			Input.Changed:Connect(function()
				if Input.UserInputState == Enum.UserInputState.End then
					Dragging = false
				end
			end)
		end
	end)

	Trigger.InputChanged:Connect(function(Input)
		if Input.UserInputType == Enum.UserInputType.MouseMovement or Input.UserInputType == Enum.UserInputType.Touch then
			DragInput = Input
		end
	end)

	UserInputService.InputChanged:Connect(function(Input)
		if Input == DragInput and Dragging then
			local Delta = Input.Position - DragStart
			TweenService:Create(Object, TweenInfo.new(0.1), {Position = UDim2.new(StartPos.X.Scale, StartPos.X.Offset + Delta.X, StartPos.Y.Scale, StartPos.Y.Offset + Delta.Y)}):Play()
		end
	end)
end

function Library:CreateWindow(Config)
    local WindowName = Config.Name or "Eclipse UI"
    local Accent = Config.Accent or Library.Theme.Accent
    
    -- Main GUI
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "EclipseHub"
    ScreenGui.Parent = CoreGui or Player:WaitForChild("PlayerGui")
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    ScreenGui.ResetOnSpawn = false

    -- Main Frame
    local Main = Instance.new("Frame")
    Main.Name = "Main"
    Main.Parent = ScreenGui
    Main.BackgroundColor3 = Library.Theme.Background
    Main.Position = UDim2.new(0.5, -325, 0.5, -200)
    Main.Size = UDim2.new(0, 650, 0, 420)
    Main.ClipsDescendants = true
    
    local MainCorner = Instance.new("UICorner")
    MainCorner.CornerRadius = UDim.new(0, 8)
    MainCorner.Parent = Main
    
    local MainStroke = Instance.new("UIStroke")
    MainStroke.Parent = Main
    MainStroke.Color = Library.Theme.Outline
    MainStroke.Thickness = 1

    -- Sidebar
    local Sidebar = Instance.new("Frame")
    Sidebar.Parent = Main
    Sidebar.BackgroundColor3 = Library.Theme.Card
    Sidebar.Size = UDim2.new(0, 60, 1, 0)
    Sidebar.ZIndex = 2
    
    local SideStroke = Instance.new("UIStroke")
    SideStroke.Parent = Sidebar
    SideStroke.Color = Library.Theme.Outline
    SideStroke.Thickness = 1
    
    local SideCorner = Instance.new("UICorner")
    SideCorner.CornerRadius = UDim.new(0, 8)
    SideCorner.Parent = Sidebar
    
    -- Cover the right corners of sidebar to blend
    local SideCover = Instance.new("Frame")
    SideCover.Parent = Sidebar
    SideCover.BackgroundColor3 = Library.Theme.Card
    SideCover.BorderSizePixel = 0
    SideCover.Position = UDim2.new(1, -5, 0, 0)
    SideCover.Size = UDim2.new(0, 5, 1, 0)
    SideCover.ZIndex = 2

    -- Sidebar Container
    local TabContainer = Instance.new("ScrollingFrame")
    TabContainer.Parent = Sidebar
    TabContainer.BackgroundTransparency = 1
    TabContainer.Position = UDim2.new(0, 0, 0, 50)
    TabContainer.Size = UDim2.new(1, 0, 1, -50)
    TabContainer.ScrollBarThickness = 0
    
    local TabList = Instance.new("UIListLayout")
    TabList.Parent = TabContainer
    TabList.HorizontalAlignment = Enum.HorizontalAlignment.Center
    TabList.Padding = UDim.new(0, 10)
    TabList.SortOrder = Enum.SortOrder.LayoutOrder

    -- Top Bar
    local TopBar = Instance.new("Frame")
    TopBar.Parent = Main
    TopBar.BackgroundTransparency = 1
    TopBar.Position = UDim2.new(0, 60, 0, 0)
    TopBar.Size = UDim2.new(1, -60, 0, 40)
    
    local TitleLbl = Instance.new("TextLabel")
    TitleLbl.Parent = TopBar
    TitleLbl.BackgroundTransparency = 1
    TitleLbl.Position = UDim2.new(0, 15, 0, 0)
    TitleLbl.Size = UDim2.new(0, 200, 1, 0)
    TitleLbl.Font = Enum.Font.GothamBold
    TitleLbl.Text = WindowName
    TitleLbl.TextColor3 = Library.Theme.Text
    TitleLbl.TextSize = 14
    TitleLbl.TextXAlignment = Enum.TextXAlignment.Left

    -- Control Buttons
    local ControlHolder = Instance.new("Frame")
    ControlHolder.Parent = TopBar
    ControlHolder.BackgroundTransparency = 1
    ControlHolder.Position = UDim2.new(1, -80, 0, 0)
    ControlHolder.Size = UDim2.new(0, 80, 1, 0)

    local function CreateControlBtn(Text, Color, Callback)
        local Btn = Instance.new("TextButton")
        Btn.Parent = ControlHolder
        Btn.BackgroundTransparency = 1
        Btn.Size = UDim2.new(0.5, 0, 1, 0)
        Btn.Font = Enum.Font.GothamBold
        Btn.Text = Text
        Btn.TextColor3 = Color
        Btn.TextSize = 14
        Btn.MouseButton1Click:Connect(Callback)
        return Btn
    end
    
    -- Open Button (When Closed)
    local OpenPill = Instance.new("TextButton")
    OpenPill.Parent = ScreenGui
    OpenPill.BackgroundColor3 = Library.Theme.Card
    OpenPill.Position = UDim2.new(0.5, -60, 0, -50)
    OpenPill.Size = UDim2.new(0, 120, 0, 30)
    OpenPill.Font = Enum.Font.GothamBold
    OpenPill.Text = "Open " .. WindowName
    OpenPill.TextColor3 = Accent
    OpenPill.TextSize = 12
    OpenPill.Visible = false
    
    local OpenStroke = Instance.new("UIStroke")
    OpenStroke.Parent = OpenPill
    OpenStroke.Color = Accent
    OpenStroke.Thickness = 1
    OpenStroke.Transparency = 0.5
    
    local OpenCorner = Instance.new("UICorner")
    OpenCorner.CornerRadius = UDim.new(1, 0)
    OpenCorner.Parent = OpenPill

    local IsMinimized = false

    -- Minimize Logic
    local MinBtn = CreateControlBtn("-", Library.Theme.TextDim, function()
        IsMinimized = not IsMinimized
        if IsMinimized then
            TweenService:Create(Main, TweenInfo.new(0.3), {Size = UDim2.new(0, 650, 0, 40)}):Play()
            Sidebar.Visible = false
        else
            TweenService:Create(Main, TweenInfo.new(0.3), {Size = UDim2.new(0, 650, 0, 420)}):Play()
            task.wait(0.2)
            Sidebar.Visible = true
        end
    end)
    MinBtn.Position = UDim2.new(0,0,0,0)

    -- Close Logic
    local CloseBtn = CreateControlBtn("X", Color3.fromRGB(255, 80, 80), function()
        Main.Visible = false
        OpenPill.Visible = true
        TweenService:Create(OpenPill, TweenInfo.new(0.5, Enum.EasingStyle.Back), {Position = UDim2.new(0.5, -60, 0, 20)}):Play()
    end)
    CloseBtn.Position = UDim2.new(0.5,0,0,0)
    
    OpenPill.MouseButton1Click:Connect(function()
        TweenService:Create(OpenPill, TweenInfo.new(0.3), {Position = UDim2.new(0.5, -60, 0, -50)}):Play()
        task.wait(0.2)
        OpenPill.Visible = false
        Main.Visible = true
    end)

    MakeDraggable(TopBar, Main)

    -- Pages Holder
    local Pages = Instance.new("Frame")
    Pages.Parent = Main
    Pages.BackgroundTransparency = 1
    Pages.Position = UDim2.new(0, 70, 0, 50)
    Pages.Size = UDim2.new(1, -80, 1, -60)
    
    --// HOME DASHBOARD GENERATION
    local function CreateHome()
        local HomeTab = Instance.new("Frame")
        HomeTab.Name = "Home"
        HomeTab.Parent = Pages
        HomeTab.BackgroundTransparency = 1
        HomeTab.Size = UDim2.new(1,0,1,0)
        HomeTab.Visible = true
        
        -- 1. User Card (Top)
        local UserCard = Instance.new("Frame")
        UserCard.Parent = HomeTab
        UserCard.BackgroundColor3 = Library.Theme.Card
        UserCard.Size = UDim2.new(1, 0, 0, 90)
        Instance.new("UICorner", UserCard).CornerRadius = UDim.new(0, 6)
        Instance.new("UIStroke", UserCard).Color = Library.Theme.Outline

        local PFP = Instance.new("ImageLabel")
        PFP.Parent = UserCard
        PFP.BackgroundColor3 = Library.Theme.Background
        PFP.Position = UDim2.new(0, 15, 0, 15)
        PFP.Size = UDim2.new(0, 60, 0, 60)
        PFP.Image = Players:GetUserThumbnailAsync(Player.UserId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size100x100)
        Instance.new("UICorner", PFP).CornerRadius = UDim.new(1, 0)
        
        local Welcome = Instance.new("TextLabel")
        Welcome.Parent = UserCard
        Welcome.BackgroundTransparency = 1
        Welcome.Position = UDim2.new(0, 90, 0, 20)
        Welcome.Size = UDim2.new(0, 200, 0, 20)
        Welcome.Font = Enum.Font.GothamBold
        Welcome.Text = "Welcome back, " .. Player.DisplayName
        Welcome.TextColor3 = Library.Theme.Text
        Welcome.TextSize = 16
        Welcome.TextXAlignment = Enum.TextXAlignment.Left
        
        local Rank = Instance.new("TextLabel")
        Rank.Parent = UserCard
        Rank.BackgroundTransparency = 1
        Rank.Position = UDim2.new(0, 90, 0, 45)
        Rank.Size = UDim2.new(0, 200, 0, 20)
        Rank.Font = Enum.Font.Gotham
        Rank.Text = "User | " .. ((identifyexecutor and identifyexecutor()) or "Unknown Executor")
        Rank.TextColor3 = Accent
        Rank.TextSize = 12
        Rank.TextXAlignment = Enum.TextXAlignment.Left

        -- 2. Server Stats (Bottom Left)
        local ServerCard = Instance.new("Frame")
        ServerCard.Parent = HomeTab
        ServerCard.BackgroundColor3 = Library.Theme.Card
        ServerCard.Position = UDim2.new(0, 0, 0, 100)
        ServerCard.Size = UDim2.new(0.55, -5, 1, -100)
        Instance.new("UICorner", ServerCard).CornerRadius = UDim.new(0, 6)
        Instance.new("UIStroke", ServerCard).Color = Library.Theme.Outline
        
        local S_Title = Instance.new("TextLabel")
        S_Title.Parent = ServerCard
        S_Title.BackgroundTransparency = 1
        S_Title.Position = UDim2.new(0, 15, 0, 15)
        S_Title.Size = UDim2.new(1, 0, 0, 20)
        S_Title.Font = Enum.Font.GothamBold
        S_Title.Text = "Server Statistics"
        S_Title.TextColor3 = Library.Theme.TextDim
        S_Title.TextSize = 12
        S_Title.TextXAlignment = Enum.TextXAlignment.Left
        
        local function MakeStat(txt, valFunc, yPos)
             local L = Instance.new("TextLabel")
             L.Parent = ServerCard
             L.BackgroundTransparency = 1
             L.Position = UDim2.new(0, 15, 0, yPos)
             L.Size = UDim2.new(1, -30, 0, 20)
             L.Font = Enum.Font.Gotham
             L.Text = txt .. ": Loading..."
             L.TextColor3 = Library.Theme.Text
             L.TextSize = 12
             L.TextXAlignment = Enum.TextXAlignment.Left
             
             task.spawn(function()
                 while ServerCard.Parent do
                    L.Text = txt .. ": " .. valFunc()
                    task.wait(1)
                 end
             end)
        end
        
        MakeStat("Ping", function() return math.floor(Player:GetNetworkPing() * 1000).."ms" end, 50)
        MakeStat("Players", function() return #Players:GetPlayers() .. "/" .. Players.MaxPlayers end, 80)
        MakeStat("Time", function() return os.date("%H:%M") end, 110)
        MakeStat("FPS", function() return math.floor(1/RunService.RenderStepped:Wait()) end, 140)

        -- 3. Changelog/Game Info (Bottom Right)
        local InfoCard = Instance.new("Frame")
        InfoCard.Parent = HomeTab
        InfoCard.BackgroundColor3 = Library.Theme.Card
        InfoCard.Position = UDim2.new(0.55, 5, 0, 100)
        InfoCard.Size = UDim2.new(0.45, -5, 1, -100)
        Instance.new("UICorner", InfoCard).CornerRadius = UDim.new(0, 6)
        Instance.new("UIStroke", InfoCard).Color = Library.Theme.Outline
        
        local I_Title = Instance.new("TextLabel")
        I_Title.Parent = InfoCard
        I_Title.BackgroundTransparency = 1
        I_Title.Position = UDim2.new(0, 15, 0, 15)
        I_Title.Size = UDim2.new(1, 0, 0, 20)
        I_Title.Font = Enum.Font.GothamBold
        I_Title.Text = "Game Info"
        I_Title.TextColor3 = Library.Theme.TextDim
        I_Title.TextSize = 12
        I_Title.TextXAlignment = Enum.TextXAlignment.Left
        
        local GameName = Instance.new("TextLabel")
        GameName.Parent = InfoCard
        GameName.BackgroundTransparency = 1
        GameName.Position = UDim2.new(0, 15, 0, 45)
        GameName.Size = UDim2.new(1, -30, 0, 40)
        GameName.Font = Enum.Font.GothamBold
        GameName.Text = game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name
        GameName.TextColor3 = Accent
        GameName.TextSize = 14
        GameName.TextWrapped = true
        GameName.TextXAlignment = Enum.TextXAlignment.Left
        GameName.TextYAlignment = Enum.TextYAlignment.Top
        
        return HomeTab
    end
    
    local HomeFrame = CreateHome()
    
    -- Tab System
    local Tabs = {}
    local FirstTab = true
    
    -- Add Home Button to Sidebar manually first
    local HomeBtn = Instance.new("TextButton")
    HomeBtn.Parent = TabContainer
    HomeBtn.BackgroundColor3 = Library.Theme.Card
    HomeBtn.BackgroundTransparency = 1
    HomeBtn.Size = UDim2.new(0, 40, 0, 40)
    HomeBtn.Text = ""
    
    local HomeIcon = Instance.new("ImageLabel")
    HomeIcon.Parent = HomeBtn
    HomeIcon.BackgroundTransparency = 1
    HomeIcon.Position = UDim2.new(0, 8, 0, 8)
    HomeIcon.Size = UDim2.new(0, 24, 0, 24)
    HomeIcon.Image = "rbxassetid://3926305904" -- Home
    HomeIcon.ImageColor3 = Accent
    
    HomeBtn.MouseButton1Click:Connect(function()
        for _, v in pairs(Pages:GetChildren()) do v.Visible = false end
        HomeFrame.Visible = true
        for _, v in pairs(TabContainer:GetChildren()) do
            if v:IsA("TextButton") and v:FindFirstChild("Icon") then
                v.Icon.ImageColor3 = Library.Theme.TextDim
            end
        end
        HomeIcon.ImageColor3 = Accent
    end)

    function Tabs:CreateTab(IconId, ConfigTab)
        local Page = Instance.new("ScrollingFrame")
        Page.Parent = Pages
        Page.BackgroundTransparency = 1
        Page.Size = UDim2.new(1, 0, 1, 0)
        Page.Visible = false
        Page.ScrollBarThickness = 2
        Page.CanvasSize = UDim2.new(0,0,0,0)
        
        local PageLayout = Instance.new("UIListLayout")
        PageLayout.Parent = Page
        PageLayout.SortOrder = Enum.SortOrder.LayoutOrder
        PageLayout.Padding = UDim.new(0, 8)
        
        PageLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
            Page.CanvasSize = UDim2.new(0, 0, 0, PageLayout.AbsoluteContentSize.Y + 20)
        end)

        local TabBtn = Instance.new("TextButton")
        TabBtn.Parent = TabContainer
        TabBtn.BackgroundTransparency = 1
        TabBtn.Size = UDim2.new(0, 40, 0, 40)
        TabBtn.Text = ""
        
        local TabIcon = Instance.new("ImageLabel")
        TabIcon.Name = "Icon"
        TabIcon.Parent = TabBtn
        TabIcon.BackgroundTransparency = 1
        TabIcon.Position = UDim2.new(0, 8, 0, 8)
        TabIcon.Size = UDim2.new(0, 24, 0, 24)
        TabIcon.Image = IconId
        TabIcon.ImageColor3 = Library.Theme.TextDim
        
        TabBtn.MouseButton1Click:Connect(function()
            for _, v in pairs(Pages:GetChildren()) do v.Visible = false end
            Page.Visible = true
            HomeIcon.ImageColor3 = Library.Theme.TextDim
            
            for _, v in pairs(TabContainer:GetChildren()) do
                if v:IsA("TextButton") and v:FindFirstChild("Icon") then
                    v.Icon.ImageColor3 = Library.Theme.TextDim
                end
            end
            TabIcon.ImageColor3 = Accent
        end)
        
        local Elements = {}
        
        function Elements:CreateSection(Title)
            local Sec = Instance.new("TextLabel")
            Sec.Parent = Page
            Sec.BackgroundTransparency = 1
            Sec.Size = UDim2.new(1, 0, 0, 25)
            Sec.Font = Enum.Font.GothamBold
            Sec.Text = "  " .. Title
            Sec.TextColor3 = Library.Theme.TextDim
            Sec.TextSize = 11
            Sec.TextXAlignment = Enum.TextXAlignment.Left
        end
        
        function Elements:AddToggle(Name, Flag, Callback)
            Library.Flags[Flag] = false
            
            local TFrame = Instance.new("Frame")
            TFrame.Parent = Page
            TFrame.BackgroundColor3 = Library.Theme.Card
            TFrame.Size = UDim2.new(1, -5, 0, 38)
            Instance.new("UICorner", TFrame).CornerRadius = UDim.new(0, 6)
            
            local TText = Instance.new("TextLabel")
            TText.Parent = TFrame
            TText.BackgroundTransparency = 1
            TText.Position = UDim2.new(0, 10, 0, 0)
            TText.Size = UDim2.new(0.7, 0, 1, 0)
            TText.Font = Enum.Font.GothamSemibold
            TText.Text = Name
            TText.TextColor3 = Library.Theme.Text
            TText.TextSize = 13
            TText.TextXAlignment = Enum.TextXAlignment.Left
            
            local TBtn = Instance.new("TextButton")
            TBtn.Parent = TFrame
            TBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
            TBtn.Position = UDim2.new(1, -45, 0.5, -10)
            TBtn.Size = UDim2.new(0, 36, 0, 20)
            TBtn.Text = ""
            Instance.new("UICorner", TBtn).CornerRadius = UDim.new(1, 0)
            
            local TCircle = Instance.new("Frame")
            TCircle.Parent = TBtn
            TCircle.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
            TCircle.Position = UDim2.new(0, 2, 0.5, -8)
            TCircle.Size = UDim2.new(0, 16, 0, 16)
            Instance.new("UICorner", TCircle).CornerRadius = UDim.new(1, 0)
            
            local function Update()
                local State = Library.Flags[Flag]
                TweenService:Create(TCircle, TweenInfo.new(0.1), {Position = State and UDim2.new(1, -18, 0.5, -8) or UDim2.new(0, 2, 0.5, -8)}):Play()
                TweenService:Create(TBtn, TweenInfo.new(0.1), {BackgroundColor3 = State and Accent or Color3.fromRGB(40,40,40)}):Play()
                pcall(Callback, State)
            end
            
            TBtn.MouseButton1Click:Connect(function()
                Library.Flags[Flag] = not Library.Flags[Flag]
                Update()
            end)
            
            -- Expose set function for config loading
            function TFrame:Set(Val)
                Library.Flags[Flag] = Val
                Update()
            end
            
            return TFrame
        end
        
        function Elements:AddButton(Name, Callback)
            local BFrame = Instance.new("Frame")
            BFrame.Parent = Page
            BFrame.BackgroundColor3 = Library.Theme.Card
            BFrame.Size = UDim2.new(1, -5, 0, 38)
            Instance.new("UICorner", BFrame).CornerRadius = UDim.new(0, 6)
            
            local Btn = Instance.new("TextButton")
            Btn.Parent = BFrame
            Btn.BackgroundTransparency = 1
            Btn.Size = UDim2.new(1, 0, 1, 0)
            Btn.Font = Enum.Font.GothamSemibold
            Btn.Text = Name
            Btn.TextColor3 = Library.Theme.Text
            Btn.TextSize = 13
            
            Btn.MouseButton1Click:Connect(function()
                TweenService:Create(BFrame, TweenInfo.new(0.1), {BackgroundColor3 = Accent}):Play()
                task.wait(0.1)
                TweenService:Create(BFrame, TweenInfo.new(0.1), {BackgroundColor3 = Library.Theme.Card}):Play()
                pcall(Callback)
            end)
        end
        
        function Elements:AddConfigSystem()
            Elements:CreateSection("Configuration")
            
            local NameBox = Instance.new("Frame")
            NameBox.Parent = Page
            NameBox.BackgroundColor3 = Library.Theme.Card
            NameBox.Size = UDim2.new(1, -5, 0, 38)
            Instance.new("UICorner", NameBox).CornerRadius = UDim.new(0, 6)
            
            local Box = Instance.new("TextBox")
            Box.Parent = NameBox
            Box.BackgroundTransparency = 1
            Box.Position = UDim2.new(0, 10, 0, 0)
            Box.Size = UDim2.new(1, -20, 1, 0)
            Box.Font = Enum.Font.Gotham
            Box.PlaceholderText = "Config Name..."
            Box.Text = ""
            Box.TextColor3 = Library.Theme.Text
            Box.TextSize = 13
            
            Elements:AddButton("Save Config", function()
                if Box.Text ~= "" then
                    Library:SaveConfig(Box.Text)
                end
            end)
            
            Elements:AddButton("Load Config", function()
                if Box.Text ~= "" then
                    local Data = Library:LoadConfig(Box.Text)
                    if Data then
                       -- Very basic re-application, in real use you'd map this to elements
                       print("Config Loaded:", Data)
                    end
                end
            end)
        end

        return Elements
    end
    
    return Tabs
end

--[[
    =========================================
    USAGE EXAMPLE
    =========================================
]]

local Window = Library:CreateWindow({
    Name = "Eclipse Hub",
    Accent = Color3.fromRGB(0, 255, 128) -- Spring Green Accent
})

local Combat = Window:CreateTab("rbxassetid://10888379573") -- Sword Icon
local Visuals = Window:CreateTab("rbxassetid://10888380809") -- Eye Icon
local Settings = Window:CreateTab("rbxassetid://10888381891") -- Gear Icon

-- Combat Tab
Combat:CreateSection("Aimbot")
Combat:AddToggle("Enable Aimbot", "AimEnabled", function(Val)
    print("Aim is", Val)
end)
Combat:AddToggle("Silent Aim", "SilentEnabled", function(Val)
    print("Silent is", Val)
end)

Combat:CreateSection("Gun Mods")
Combat:AddButton("Force Headshot", function()
    print("Applied Headshot")
end)

-- Visuals Tab
Visuals:CreateSection("ESP Settings")
Visuals:AddToggle("Box ESP", "BoxEsp", function(v) print("Box", v) end)
Visuals:AddToggle("Tracers", "Trace", function(v) print("Trace", v) end)

-- Settings / Config Tab
Settings:AddConfigSystem()
